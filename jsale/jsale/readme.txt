+++Инструкция по использованию скрипта для приёма заказов jSale 1.37+++

Разработчик скрипта Алексей Опанасенко: http://neverlex.com
Сайт проекта: http://jsale.biz

1. Установка:

Шаг 1. Загружаем содержимое дистрибутива на сервер. Рабочая папка скрипта jsale/. Остальные файлы для образца.

Шаг 2. Для настройки правим в текстовом редакторе файл jsale/config.inc.php. Там находятся все настройки и подключение модулей. Всё подробно откомментировано.
Рекомендуется использовать редактор NotePad++.

Прежде всего нужно выставить:

адрес сайта		- $config['sitelink']
e-mail адреса	- $config['email']['receiver'] и $config['email']['answer']
настройки БД	- $config['database']['host'], $config['database']['user'], $config['database']['pass'], $config['database']['name']

Шаг 3. Вставляем в место вывода кнопки заказа код:

Вариант 3.1 Если данные товара сохранены в настройках (раздел НАСТРОЙКА ПОЛЕЙ ТОВАРА), то задавать дополнительно их не нужно. Самый простой вариант.

<script src="jsale/JS.php" type="text/javascript"></script>

Вариант 3.2 Если нужно использовать несколько товаров, то параметры товара (идентификатор, название, цену, единицу измерения, количество) следует задавать в виде GET параметров.

<script src="jsale/JS.php?id=001&title=Товар 1&price=10.00&qty=1&unit=кг" type="text/javascript"></script>

Вариант 3.3 Также можно использовать дополнительные параметры ($param1, param2, param3). Сохранять в них можно, что угодно. Например, цвет, размер и т.д.

<script src="jsale/JS.php?id=001&title=Товар 1&price=10.00&qty=1&param1=Красный&param2=XL&param3=Что-то ещё" type="text/javascript"></script>

Вариант 3.4 Рядом с кнопкой можно вывести описание товара. Эта информация используется только для отображения. Или же можно перенести описание в форму заказа.

<script src="jsale/JS.php?id=001&title=Товар 1&price=10.00&description=<p>Краткое описание товара.</p>" type="text/javascript"></script>

Вариант 3.5 Для того, чтобы предоставить (или нет) ввод количества, нужно использовать параметр qty_type. Чтобы вывести поле, выставьте qty_type=text. Чтобы не выводить поле для ввода количества, qty_type=0. 

<script src="jsale/JS.php?qty_type=text" type="text/javascript"></script>

Вариант 3.6 Для того, чтобы предоставить покупателю процентную скидку, используйте параметр discount. 

<script src="jsale/JS.php?discount=10" type="text/javascript"></script>

Все параметры по умолчанию настраиваются в настройках.

Кнопку заказа можно генерировать в панели администратора, начиная с версии 1.31.

Шаг 4. Создание таблиц в БД.

	Если данные подключения к MySQL в настройках прописаны верно, то после первого открытия страницы с кнопкой заказа в БД будут созданы таблицы 'custom' и 'custom_item'.
	Для версии PRO будут также созданы таблицы 'category' и 'product'. А для версии E-PRO таблица 'download'.
	После этого файл jsale/install.inc.php должен быть автоматически удалён. Если этого не произошло, удалите его вручную.

Шаг 5. Для изменения оформления правим файл jsale/css/jsale.css
	Кнопка: .jSaleOrder
	Форма: .jSaleForm
	Модальное окно: #simplemodal-container
	
Шаг 6. По надобности правим шаблоны в папке design/.

	Основные шаблоны:
	
	Шаблоны вывода товаров:
	-----------------------
	Шаблон вывода кнопки заказа - design/orderButton.tpl.php
	Шаблон вывода формы заказа - design/orderForm.tpl.php
	
	Шаблоны писем:
	--------------
	Шаблон письма заказа - design/emailOrder.tpl.php
	Шаблон письма об изменении статуса заказа - design/emailChangeStatus.tpl.php
	
	
Шаг 7. Заходим в админку (jsale/admin/) и работаем в обычном режиме.
	По умолчанию логин/пароль: demo/demo.

2. Бонусы:

Бонус #1. В Базовой версии скрипта Форма обратной связи уже внедрена в jSale. Для вставки формы используйте код:

<script src="jsale/JS.php?feedback" type="text/javascript"></script>

Все необходимые настройки находятся в файле настроек.

Бонус #2. Скрипт для exit-трафика находится в папке exit/. Смотрите пример в файле index.html и модифицируйте.

Бонус #3. На скрипте модального окна simplemodal.js построена jSale. Он бесплатен.

Находится в папке js/jquery.simplemodal.1.4.2.min.js. Сайт разработчика: http://www.ericmmartin.com/projects/simplemodal/

Пользуйтесь.

3. Вопросы:

3.1. У меня сайт в кодировке windows-1251. Что делать?

Шаг 1. Установить в jsale/config.inc.php настройку $config['encoding'] = 'windows-1251';

Шаг 2. Перекодировать все файлы скрипта. Можете сделать это вручную с помощью редактора Notepad++.
Либо с помощью вспомогательно скрипта.

Для этого скопируйте папку scripts/ в папку со скриптом jsale/.
Откройте файл encoding.php редактором, раскоментируйте код (уберите /* после <?php) и откройте файл в браузере (путь должен быть такой http://ваш_сайт.ру/jsale/scripts/encoding.php).
ВНИМАНИЕ!!! ОТКРЫВАТЬ ЭТОТ ФАЙЛ НУЖНО ТОЛЬКО ОДИН РАЗ!!! Повторный запуск скрипта уничтожит данные.

Затем ОБЯЗАТЕЛЬНО удалите папку scripts/ с сервера.

3.2. Я хочу обновить скрипт, но у меня версия ниже 1.3, а следовательно другая структура данных в базе
Это можно сделать руками с помощью запросов к БД. Либо использовать вспомогательный скрипт.

Для этого скопируйте папку scripts/ в папку со скриптом jsale/.
Откройте файл sql.php редактором, раскоментируйте код (уберите /* после <?php) и откройте файл в браузере (путь должен быть такой http://ваш_сайт.ру/jsale/scripts/sql.php).
ВНИМАНИЕ!!! ОТКРЫВАТЬ ЭТОТ ФАЙЛ НУЖНО ТОЛЬКО ОДИН РАЗ!!! Повторный запуск скрипта вставит лишние данные.

Затем ОБЯЗАТЕЛЬНО удалите папку scripts/ с сервера.

ОБЯЗАТЕЛЬНО сделайте бэкап данных перед запуском скрипта!!!
При некорректном переносе, загрузите в БД старые данные и обращайтесь на info@jsale.biz


Вопросы и предложения можно отправлять на info@jsale.biz

Спасибо за приобретение отличного скрипта для приёма заказов jSale!

+++Инструкция по использованию скрипта для приёма заказов jSale 1.33+++

Разработчик скрипта Алексей Опанасенко: http://neverlex.com
Сайт проекта: http://jsale.biz

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
1. Установка:

Шаг 1. Загружаем содержимое дистрибутива на сервер. Рабочая папка скрипта jsale/. Остальные файлы для образца.

Шаг 2. Для настройки правим в текстовом редакторе файл jsale/config.inc.php. Там находятся все настройки и подключение модулей. Всё подробно откомментировано.
Рекомендуется использовать редактор NotePad++.

Прежде всего нужно выставить:

адрес сайта		- $config['sitelink']
e-mail адреса	- $config['email']['receiver'] и $config['email']['answer']
настройки БД	- $config['database']['host'], $config['database']['user'], $config['database']['pass'], $config['database']['name']

Шаг 3. Вставляем в место вывода кнопки заказа код:

Вариант 3.1 Если данные товара сохранены в настройках (раздел НАСТРОЙКА ПОЛЕЙ ТОВАРА), то задавать дополнительно их не нужно. Самый простой вариант.

<script src="jsale/JS.php" type="text/javascript"></script>

Вариант 3.2 Если нужно использовать несколько товаров, то параметры товара (идентификатор, название, цену, единицу измерения, количество) следует задавать в виде GET параметров.

<script src="jsale/JS.php?id=001&title=Товар 1&price=10.00&qty=1&unit=кг" type="text/javascript"></script>

Вариант 3.3 Также можно использовать дополнительные параметры ($param1, param2, param3). Сохранять в них можно, что угодно. Например, цвет, размер и т.д.

<script src="jsale/JS.php?id=001&title=Товар 1&price=10.00&qty=1&param1=Красный&param2=XL&param3=Что-то ещё" type="text/javascript"></script>

Вариант 3.4 Рядом с кнопкой можно вывести описание товара. Эта информация используется только для отображения. Или же можно перенести описание в форму заказа.

<script src="jsale/JS.php?id=001&title=Товар 1&price=10.00&description=<p>Краткое описание товара.</p>" type="text/javascript"></script>

Вариант 3.5 Для того, чтобы предоставить (или нет) ввод количества, нужно использовать параметр qty_type. Чтобы вывести поле, выставьте qty_type=text. Чтобы не выводить поле для ввода количества, qty_type=0. 

<script src="jsale/JS.php?qty_type=text" type="text/javascript"></script>

Вариант 3.6 Для того, чтобы предоставить покупателю процентную скидку, используйте параметр discount. 

<script src="jsale/JS.php?discount=10" type="text/javascript"></script>

Все параметры по умолчанию настраиваются в настройках.

Кнопку заказа можно генерировать в панели администратора, начиная с версии 1.31.

Вариант 3.7 Использование различных шаблонов, методов вывода формы и надписи на кнопке.

Пример:

<script src="jsale/JS.php?template=2&form_type=button&button_text=Заказать" type="text/javascript"></script>

, где
template - название или номер шаблона [подробнее в пункте 4.3]
form_type - метод вывода на экран (простая форма ИЛИ кнопка + форма в модальном окне) [подробнее в пункте 4.4]
button_text - текст на кнопке

Шаг 4. Создание таблиц в БД.

	Если данные подключения к MySQL в настройках прописаны верно, то после первого открытия страницы с кнопкой заказа в БД будут созданы таблицы 'custom' и 'custom_item'.
	Для версии PRO будут также созданы таблицы 'category' и 'product'. А для версии E-PRO таблица 'download'.
	После этого файл jsale/install.inc.php должен быть автоматически удалён. Если этого не произошло, удалите его вручную.

Шаг 5. Для изменения оформления правим файл jsale/css/jsale.css
	Кнопка: .jSaleOrder
	Форма: .jSaleForm
	Модальное окно: #simplemodal-container
	
Шаг 6. По надобности правим шаблоны в папке design/.

	Основные шаблоны:
	
	Шаблоны вывода товаров:
	-----------------------
	Шаблон вывода кнопки заказа - design/orderButton.tpl.php
	Шаблон вывода формы заказа - design/orderForm.tpl.php
	
	Шаблоны писем:
	--------------
	Шаблон письма заказа - design/emailOrder.tpl.php
	Шаблон письма об изменении статуса заказа - design/emailChangeStatus.tpl.php
	
	
Шаг 7. Заходим в админку (jsale/admin/) и работаем в обычном режиме.
	По умолчанию логин/пароль: demo/demo.

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
2. Бонусы:

Бонус #1. В Базовой версии скрипта Форма обратной связи уже внедрена в jSale. Для вставки формы используйте код:

<script src="jsale/JS.php?feedback" type="text/javascript"></script>

Все необходимые настройки находятся в файле настроек.

Бонус #2. Скрипт для exit-трафика находится в папке exit/. Смотрите пример в файле index.html и модифицируйте.

Этот бонус доступен начиная с Базовой версии.

Бонус #3. На скрипте модального окна simplemodal.js построена jSale. Он бесплатен.

Находится в папке js/jquery.simplemodal.1.4.2.min.js. Сайт разработчика: http://www.ericmmartin.com/projects/simplemodal/

Пользуйтесь.

Бонус #4. В Продвинутой версии скрипта зашита массовая проверка треков почты России.

Можете просто задать список треков (каждый с новой строки) и получить информацию о них в виде таблицы.

Чтобы включить в меню массовую проверку треков, уберите символы /* и */ в строках 

/* if (is_file(dirname(__FILE__) . '/masscheck.php'))
		array_push ($menu_items,
			array ('masscheck', 'Массовая проверка', 'Масовая проверка треков Почты России')
		); */

файла jsale/admin/_menu.php

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
3. Вопросы:

3.1. У меня сайт в кодировке windows-1251. Что делать?

Шаг 1. Установить в jsale/config.inc.php настройку $config['encoding'] = 'windows-1251';

Шаг 2. Перекодировать все файлы скрипта. Можете сделать это вручную с помощью редактора Notepad++.
Либо с помощью вспомогательно скрипта.

Для этого скопируйте папку scripts/ в папку со скриптом jsale/.
Откройте файл encoding.php редактором, раскоментируйте код (уберите /* после <?php) и откройте файл в браузере (путь должен быть такой http://ваш_сайт.ру/jsale/scripts/encoding.php).
ВНИМАНИЕ!!! ОТКРЫВАТЬ ЭТОТ ФАЙЛ НУЖНО ТОЛЬКО ОДИН РАЗ!!! Повторный запуск скрипта уничтожит данные.

Затем ОБЯЗАТЕЛЬНО удалите папку scripts/ с сервера.

3.2. Я хочу обновить скрипт, но у меня версия ниже 1.3, а следовательно другая структура данных в базе
Это можно сделать руками с помощью запросов к БД. Либо использовать вспомогательный скрипт.

Для этого скопируйте папку scripts/ в папку со скриптом jsale/.
Откройте файл sql.php редактором, раскоментируйте код (уберите /* после <?php) и откройте файл в браузере (путь должен быть такой http://ваш_сайт.ру/jsale/scripts/sql.php).
ВНИМАНИЕ!!! ОТКРЫВАТЬ ЭТОТ ФАЙЛ НУЖНО ТОЛЬКО ОДИН РАЗ!!! Повторный запуск скрипта вставит лишние данные.

Затем ОБЯЗАТЕЛЬНО удалите папку scripts/ с сервера.

ОБЯЗАТЕЛЬНО сделайте бэкап данных перед запуском скрипта!!!
При некорректном переносе, загрузите в БД старые данные и обращайтесь на info@jsale.biz

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
4. Дополнительные возможности:

4.1. Для генерации корректных отчётов, обязательно корректно заполните раздел НАСТРОЙКИ ОТЧЁТОВ.

4.2. Для вывода бланков на печать, правьте НАСТРОЙКИ ПЕЧАТИ БЛАНКОВ. Во-первых, разрешите печать. Во-вторых, заполните необходимую информацию.
Шаблоны бланков: jsale/design/printForm1.tpl.php и jsale/design/printForm2.tpl.php

4.3. Использование разных шаблонов.

Нужно создать шаблон и прописать его в GET параметре.

Как это делается...

Создаём файл design/orderForm_2.tpl.php, где 2 - идентификатор шаблона. Имя шаблона должно идти после подчёркивания.

При вставке кода на страницу, добавляем параметр template=2

Пример:

<script src="jsale/JS.php?template=2" type="text/javascript"></script>

Если template не указан, то будет использован шаблон design/orderForm.tpl.php.

4.4. Вывод формы разным методами.

Сейчас есть 2 варианта вывода формы: в модальном окне по клику кнопки и обычный вывод на страницу.

Метод вывода по умолчанию вы можете выставить в файле настроек config.inc.php

$config['product']['form_type']				= 'button'; # 2 варианта вывода формы: form или button

Соответственно, form - вывод обычной формой, button - вывод кнопкой.

Метод вывода можно задать конкретной форме с помощью добавления GET параметра form_type=form

Пример:

<script src="jsale/JS.php?form_type=form" type="text/javascript"></script>

4.5. Настройка автоматической оплаты с помощью агрегатора.

Всё довольно просто.
Регистрируетесь на сайте агрегатора, создаёте магазин, вводите все необходимые данные, в ResultURL (обработчик запроса) прописываете ссылку http://вашсайт.ru/jsale/modules/C_Payment.php. Метод POST.

Тогда после оплаты заказ будет автоматически изменять статус на Оплаченный.

4.6. Обновление цифровых товаров.

Встройте в нужное место страницы ссылку вида http://вашсайт.ru/jsale/update/id_товара/

, где id_товара - идентификатор вашего товара (код).

Или можете встроить ссылку прямо в шаблон вывода кнопки/формы.

4.7. Партнёрская программа.

Чтобы учитывать клики, разместите на страницах вашего сайта (в самом начале до вывода контента) код подключения файла C_Partner.inc.php
Например: <?php include_once dirname(__FILE__) . '/jsale/modules/C_Partner.inc.php'; ?>

4.8. Автоматические уведомления.

Чтобы настроить автоматические уведомления, нужно выставить соответствующие настройки в config.inc.php, а затем в CRON поставить выполнение URL http://site.ru/jsale/modules/C_Notices.php?secret=$config['secretWord'] с периодичностью в 1 сутки

4.9. Дополнительные поля.

Дополнительные поля можно добавлять с помощью настройки файла config.inc.php в соответствующем разделе ДОПОЛНИТЕЛЬНЫЕ ПОЛЯ.
Поля могут быть 3 типов: select, checkbox, input. Также могут иметь надбавку к стоимости товара. Также могут быть обязательными.

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Вопросы и предложения можно отправлять на info@jsale.biz

Спасибо за приобретение отличного скрипта для приёма заказов jSale!

Отзыв отправьте на почту и он будет опубликован на оф.сайте со ссылкой на ваш проект.